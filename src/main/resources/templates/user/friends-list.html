<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Forgot your password</title>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
          integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/style.css}" href="../../static/css/style.css" type="text/css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <!-- Brand -->
        <a href="#" class="navbar-brand">
            <span style="color: white"><b>Geek </b></span>
            <span style="color: black" class="logo-orange"><b>hub</b></span>
        </a>
    </div>
</nav>

<div class="container mx-auto border border-warning rounded text-center col-md-6">
    <div id="friendRequestList">
        <ul>
            <li th:each="user : ${friends}">
                <p th:text="${user.firstName}"></p>
                <p th:text="${user.lastName}"></p>
                <p th:text="${user.id}"></p>
                <button th:onclick="'acceptFriendRequest(\'' + ${user.id} + '\');'" th:value="${user.id}">accept</button>
                <!--<button th:onclick="acceptFriendRequest(${user.id})" th:name="${user.id}">accept</button>-->
                <hr>
                <!--<input type="hidden" th:value="${user.id}" id="friend-requested-id">-->
            </li>
        </ul>
    </div>

</div>


<script>

    function acceptFriendRequest(id){
        console.log(id);
        let friendId = "" + id + "";

        let stringURL = '/acceptFriendRequest';
        let dataJSON = JSON.stringify({id: friendId});

        $.ajax({
            url: stringURL,
            type: 'POST',
            contentType: 'application/json',
            data: dataJSON,
            success: function (response) {
                console.log("succeed request!");
                console.log(response);
            },
            error: function (err) {
                console.log(err);
                console.log("not succeed request!");
            }
        });
    }


    // $().click(function () {
    //
    //     let id = $(this).val();
    //     console.log(id);

        // // let stringURL = "@{'/friend-request-{friendId}-from-{userId}'(friendId=${userPage.id}, userId=${loggedUser.id})}";
        // // let stringURL = '/friend-request-' + loggedUserId + '-from-' + userPageId;
        // let stringURL = '/friend-request';
        // let dataJSON = JSON.stringify({friendId: userPageId, userId: loggedUserId});
        // console.log(dataJSON);
        //
        // $.ajax({
        //     url: stringURL,
        //     type: 'POST',
        //     contentType: 'application/json',
        //     data: dataJSON,
        //     success: function (response) {
        //         console.log("succeed request!");
        //         console.log(response);
        //     },
        //     error: function (err) {
        //         console.log(err);
        //         console.log("not succeed request!");
        //     }
        // });
    // });

</script>
<!--<form th:action="@{'/verify/sendCodeAgainFor/id{id}'(id=${userId})}" method="POST">-->
<!--<button type="submit" >Send code again</button>-->
<!--</form>-->
<!--<script src="/js/script.js"></script>-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
</body>
</html>